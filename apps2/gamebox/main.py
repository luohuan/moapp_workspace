from urllib import parse
dormitorydata=[

    {
        'id':7,
        'cover':'http://material.motimaster.com/shiyimin1534211266000/haoyouhuawo.jpg',
        'title':'好友画我',
        'people':'98.04万人在测',
        'details':'好友眼中的你是什么样子的？',
        'path':'pages/index/index',
        'appid':'wx02207e6022e44158',
        'button_name':'开玩'
    },



    {
        'id':6,
        'cover':'http://material.motimaster.com/shiyimin1534489600000/434059160321695634.png',
        'title':'御天传奇',
        'people':'378.45万人在玩',
        'details':'腾讯正版授权游戏，等你来玩!',
        'path':'?hdposition=20914',
        'appid':'wx895e6463811fd7ca',
        'button_name':'开玩'
    },

    {
        'id':1,
        'cover':'http://material.motimaster.com/jiangxiaoni1533089743000/6.jpg',
        'title':'看你怎么说',
        'people':'129.35万人在测',
        'details':'说说你对我的印象吧！',
        'path':'pages/page1/page1',
        'appid':'wxc1a59dd1befff332',
        'button_name':'开玩'
    },
    # {
    #     'id':2,
    #     'cover':'http://material.motimaster.com/shiyimin1534212291000/pingxing.jpg',
    #     'title':'平行世界',
    #     'people':'69.89万人在测',
    #     'details':'平行世界里，你会遇到哪些缘分？',
    #     'path':'pages/page1/page1',       
    #     'appid':'wx628e03240351132c',
    #     'button_name':'开玩'
    # },
    {
        'id':3,
        'cover':'http://material.motimaster.com/linda123jiang/hi/main/417a21294755bea737cefda07585213a.jpg',
        'title':'名字价值',
        'people':'89.08万人在测',
        'details':'测你名字都包含哪些特性？' ,
        'path':'pages/page9/page9',
        'appid':'wx9f918c171334a22a', 
        'button_name':'开玩'

    },

    {
        'id':9,
        'cover':'http://material.motimaster.com/jiangxiaoni1533094978000/123.jpg',
        'title':'八月关键词',
        'people':'21.09万人在测',
        'details':'愿你有人爱，有事做，也有所期待。',
        'path':'pages/page13/page13',
        'appid':'wx9f918c171334a22a', 
        'button_name':'开玩'

    },
    {
        'id':10,
        'cover':'http://material.motimaster.com/linda123jiang/hi/main/e04ef01bcbbfe3e2ece047cdc7f3ffd5.jpg',
        'title':'前世今生',
        'people':'49.53万人在测',
        'details':'知晓前世姻缘，重结今生善果！',
        "path":"https://xcx2-zxcs.lingji666.com/forecastlunhuishubundle/index.html",
        'appid':'wx6acc1db2845590f6',
        'button_name':'测试'
    },
    {
        'id':11,
        'cover':'http://material.motimaster.com/linda123jiang/hi/main/a4c6ebdb29a93a0c96a395e5420176fd.jpg',
        'title':'爱情塔罗牌',
        'people':'47.3万人在测',
        'details':'三张塔罗牌，解决你的爱情烦恼！',
        "path":"https://xcx2-zxcs.lingji666.com/forecasttaluobundle/index.html",
        "type":'protest',
        'appid':'wx6acc1db2845590f6',
        'button_name':'测试'
        
    },
    {
        'id':12,
        'cover':'http://material.motimaster.com/linda123jiang/hi/main/cbe9068f79faeff1a6ab40d5f1df682b.jpg',
        'title':'感情支招',
        'people':'27.44万人在测',
        'details':'八字姻缘解析，看你何时恋爱结婚？',
        "path":"https://xcx2-zxcs.lingji666.com/baziyinyuan/index.html",
        'appid':'wx6acc1db2845590f6',
        'button_name':'测试'
    },
    {
        'id':13,
        'cover':'http://material.motimaster.com/linda123jiang/hi/main/92920857d821b82764dd7d6b51fe2bcb.jpg',
        'title':'深度个人占星',
        'people':'19.8万人在测',
        'details':'个人星盘分析，透彻解读你的命运！',
        "path":"https://xcx2-zxcs.lingji666.com/gerenzhanxing/index.html",
        'appid':'wx6acc1db2845590f6',
        'button_name':'测试'
        
    },
]

griditems1 = [

    {
        'id':1,
        'src': 'http://material.motimaster.com/shiyimin1534153129000/xingzuoxiaowo.png',
        'people':'1200万人在测',
        'title': '星座小屋',
        'path':'pages/pageentrance/pageentrance',
        'appid':'wx01434b3ed0010d28'
    },
    # {   'id':2,
    #     'src': 'http://material.motimaster.com/shiyimin1534489335000/604097932045847341.jpg',
    #     'people':'378万人在测',
    #     'title': '御天传奇',
    #     'path':'?hdposition=20914',
    #     'appid':'wx895e6463811fd7ca'

    # },   
    {
        'id':3,
        'src': 'http://material.motimaster.com/shiyimin1534153552000/huiyiqiang.png',
        'people':'30万人在测',
        'title': '好友回忆墙',
        'path':'pages/begin/begin',
        'appid':'wx468ad783f165eea0'

    },
    {
        'id':4,
        'src': 'http://material.motimaster.com/shiyimin1534154048000/quce.png',
        'people':'87万人在测',
        'title': '趣测小窝',
        'path':'pages/mainPage/mainPage',
        'appid':'wx91f13354f5356b6c'

    },
    {
        'id':5,
        'src':'http://material.motimaster.com/shiyimin1534500732000/小程序头像.png',
        'title':'平行世界',
        'people':'98万人在测',
        'path':'pages/page1/page1',
        'appid':'wx628e03240351132c'
    },
    

]
# 前世今生，爱情塔罗牌，感情支招，深度个人占星，你今生有怎样的命运，前世姻缘
# 暂时先把这6个测试的路径和图片地址给我吧。@harvey 

dataswiper1=[
            {
                'id':3,
                'pic':'http://material.motimaster.com/shiyimin1534501968000/258321859288967773.gif',
                'title':'御天传奇',
                'people':'378.45万人在玩',
                'details':'腾讯正版授权游戏',
                'path':'?hdposition=20914',
                'appid':'wx895e6463811fd7ca',              
                'button_name':'可用',
                'type': 'picker'
            # },
            # {
            #     'id': 2,
            #     'pic': 'http://material.motimaster.com/shiyimin1534133267000/xingzuo.jpg',
            #     'title': '星座小窝',
            #     'path':'pages/pageentrance/pageentrance',
            #     'appid':'wx01434b3ed0010d28',
            #     'type': 'picker'
            # },
            # {
            #     'id': 1,
            #     'pic': 'http://material.motimaster.com/shiyimin1534137928000/huiyi.jpg',
            #     'title': '好友回忆墙',
            #     'path':'pages/begin/begin',
            #     'appid':'wx468ad783f165eea0',
                # 'type': 'input'
            }]


def main():
    with MoApp(appid='wx267c13c76965a037',name='娱乐盒子'):
        listPage()
 

class listPage(Page):
    """docstring for gridPage"""
    def UI():
        #Box(size=[750,1],borderTop='3px solid LightGrey',pos=[0,610])  #横线

        with Swiper(id='swiper1',size=[750,310],interval=3000, duration=2000, autoplay=True) as a:
            a._add_attrs(['circular'])
            this.circular = True
            with SwiperItem(id ='dataswiper'):
                Image(pos=[0,0, 750, 310], src ='{item.pic}',onTap = moui.request(go_to, path='{item.path}',appid='{item.appid}',title='{item.title}'))# borderRadius='10px',
                   


        with Box(id='hidden_1',pos=[0,300]):
       
            Text( id='recommend', pos=[20,30], fontWeight='450',fontSize=37)
            
            # Box(size=[750,1],borderBottom='1px solid WhiteSmoke',pos=[0,500])  #横线
            with ScrollBox(pos=[0,40],size=[750, 300], scrollX=True):

                with Grid(name='grid1', pos=['center', 10], column=9):
                    with Box(size=[160,220],marginLeft=20,onTap = moui.request(go_to, path='{item.path}',appid='{item.appid}',title='{item.title}')):                   
                        Image(pos=['center', 50],size=[150, 150], src='{item.src}', mode='aspectFill',borderRadius= '5px')
                        Text(pos=['center',260],text='{item.people}',color='#808080',fontSize=25)
                        Text(pos=['center',220],text='{item.title}',color='#353535',fontSize=30,fontWeight='430')
                   
            Image(id='ad',pos=[0,370],size=[750,191],onTap=moui.request(ad_goto,name='ad'))


            
            with Box(id='hidden_ad',pos=[0,500]):
               
            
                    
                Text( id='all_play',pos=[20,80],fontWeight='450',fontSize=37)


                with Box(pos=[0,140],width=750,background='#222222'):   #列表
                    

                    with List(name='dormitorylist'):
                        with Box(pos=[0,10],size=[750,180],borderRadius='0px',background='white',
                            borderBottom= '1px solid WhiteSmoke',marginBottom=15,onTap= moui.request(go_to,path='{item.path}',appid='{item.appid}',title='{item.title}')):
                            #Text(pos=[55,55],text='{item.id}',color='#353535',fontSize=35)
                            Image(left=20,size=[150, 150], src='{item.cover}' , mode='aspectFill',borderRadius= '10px')
                            Text(pos=[190,0],text='{item.title}',color='#353535',fontSize=33)
                            Text(pos=[190,55],text='{item.people}',color='#808080',fontSize=28)
                            Text(pos=[190,110],text='{item.details}',fontSize=30,color='#808080')
                            Button(pos=[590,20],type='miniPrimary',text='{item.button_name}',size=[130,65],lineHeight='30px',padding=0,fontSize=35,
                                fontWeight='400',color='#fbfafa',boxShadow ='1px 0px 1px 0px rgba(0,0,0,0.3)',
                                background='#ee5b60')
                            Button(pos=[20,0],size=[710,200],plain=True,background='rgba(0,0,0,0)',border='0px solid red',)

                
                    
                    ShareButton(name='fenxiang',background='http://material.motimaster.com/shiyimin1533717166000/share.png',hidden=True,size = [210,70],position = 'fixed',lineHeight = 90,fontSize = 35,fontWeight = '900',
                        color = '#f7ca4e',border = 0,plain = True,effect=move(path=[(-40,950), (-10,950)], t=1.5, c=0,p=1))
            Image(id='ad_2',pos=[0,1030],size=[750,191],position = 'fixed',onTap=moui.request(ad_goto,name='ad_2'))

    def onInit():   
        mo.stat('')
        if page.options.adtag:
            mo.stat('launch_adtag_%s'%page.options.adtag)
        mo.stat('launch_adall')
        page.dormitorylist.data = dormitorydata  #获取列表信息 
        page.grid1.data = griditems1
        page.share.title = "我发现了一个好玩的东西，快来看看吧！"
        page.share.imageUrl = 'http://material.motimaster.com/shiyimin1534156084000/box.png'
        page.fenxiang.hidden = False

        switch = False  #控制轮播器是否隐藏
        ad     = True #控制广告区域是否隐藏

        page.ad_2.hidden=True
        if switch == True:                
            page.dataswiper.hidden=True
            page.hidden_1.pos=[0,0]

        if ad == True:                  
            page.ad.hidden=True
            page.hidden_ad.pos=[0,310]


        page.recommend.text='热门推荐'             #这里控制‘热门’的文字
        page.recommend.color='#d32f24'

        page.all_play.text='大家都在玩'      #这里控制‘大家都在玩’的文字
        page.all_play.color='#d32f24'

        page.dataswiper.data = dataswiper1


        page.swiper1.indicatorDots=False
        page.swiper1.indicatorActiveColor ='#FF8C69'

    def go_to():
        if page.options.adtag:
            mo.stat('click_%s_%s'%(page.options.adtag,params.appid))
        
        mo.stat('click_all_%s'%(params.appid))
        if(params.appid == 'wx6acc1db2845590f6'):
            params.path = params.path + "?channel=swlpdxcx"
            param_m = parse.quote(params.path)
            mo.gotoMiniProgram(params.appid, 'pages/webview/webview?src='+ param_m )
        else:
            mo.gotoMiniProgram(params.appid,params.path)
    def ad_goto(): 
        pass